import Head from 'next/head'

import Navbar from '../components/Navbar/Navbar'
import HeroSection from '../components/HeroSection/HeroSection'
import Frase from '../components/Frase/Frase'
import Catalogo from '../components/Catalogo/Catalogo'
import Plazas from '../components/Plazas/Plazas'
import Packs from '../components/Packs/Packs'
import Preguntas from '../components/Preguntas/Preguntas'
import Reviews from '../components/Reviews/Reviews'
import Footer from '../components/Footer/Footer'

import Loading from './loading'

import { useEffect, useRef, useState } from 'react'

export default function Home() {

  const header = useRef(null)
  const catalogo = useRef(null)
  const packs = useRef(null)
  const preguntas = useRef(null)

  const [isMobile, setMobile] = useState(false)
  const [isLoading, setIsLoading] = useState(true)

  useEffect(() => {
    setMobile(window.innerWidth <= 769)
    window.addEventListener('resize', () => {
      setMobile(window.innerWidth <= 769)
    })

    setTimeout(() => {
      setIsLoading(false)
    }, 2000)
  }, [])

  return (
    <>
      <Head>
        <title>Davean Comuniones</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />

        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/>
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/>
        <link rel="manifest" href="/site.webmanifest"/>
        <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/>
        <meta name="msapplication-TileColor" content="#00aba9"/>
        <meta name="theme-color" content="#ffffff"/>
        
        {/* Preload fonts to load fonts faster */}
        <link
          rel="preload"
          href="/fonts/adele-light-webfont-webfont.woff"
          as="font"
          crossOrigin="anonymous"
        />
        <link
          rel="preload"
          href="/fonts/adele-light-webfont-webfont.woff2"
          as="font"
          crossOrigin="anonymous"
        />
        <link
          rel="preload"
          href="/fonts/dk_lemon_yellow_sun-webfont.woff"
          as="font"
          crossOrigin="anonymous"
        />
        <link
          rel="preload"
          href="/fonts/dk_lemon_yellow_sun-webfont.woff2"
          as="font"
          crossOrigin="anonymous"modernline-webfont
        />
        <link
          rel="preload"
          href="/fonts/modernline-webfont.woff"
          as="font"
          crossOrigin="anonymous"
        />
        <link
          rel="preload"
          href="/fonts/modernline-webfont.woff2"
          as="font"
          crossOrigin="anonymous"
        />
      </Head>

      {isLoading ? <Loading /> : <>
          <Navbar catalogo={catalogo} packs={packs} preguntas={preguntas}/>

          <main>
            <HeroSection header={header}/>

            <Frase />

            <Catalogo isMobile={isMobile} catalogo={catalogo}/>

            <Plazas isMobile={isMobile}/>

            <Packs isMobile={isMobile} packs={packs}/>

            <Preguntas isMobile={isMobile} preguntas={preguntas}/>

            <Reviews isMobile={isMobile}/>
          </main>

          <Footer header={header}/>
        </>
      }
      
    </>
  )
}
